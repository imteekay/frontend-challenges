{"ast":null,"code":"import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" || typeof Blob !== \"undefined\" && Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\"; // ArrayBuffer.isView method is not defined in IE10\n\nconst isView = obj => {\n  return typeof ArrayBuffer.isView === \"function\" ? ArrayBuffer.isView(obj) : obj && obj.buffer instanceof ArrayBuffer;\n};\n\nconst encodePacket = (_ref, supportsBinary, callback) => {\n  let {\n    type,\n    data\n  } = _ref;\n\n  if (withNativeBlob && data instanceof Blob) {\n    if (supportsBinary) {\n      return callback(data);\n    } else {\n      return encodeBlobAsBase64(data, callback);\n    }\n  } else if (withNativeArrayBuffer && (data instanceof ArrayBuffer || isView(data))) {\n    if (supportsBinary) {\n      return callback(data);\n    } else {\n      return encodeBlobAsBase64(new Blob([data]), callback);\n    }\n  } // plain string\n\n\n  return callback(PACKET_TYPES[type] + (data || \"\"));\n};\n\nconst encodeBlobAsBase64 = (data, callback) => {\n  const fileReader = new FileReader();\n\n  fileReader.onload = function () {\n    const content = fileReader.result.split(\",\")[1];\n    callback(\"b\" + content);\n  };\n\n  return fileReader.readAsDataURL(data);\n};\n\nexport default encodePacket;","map":{"version":3,"names":["PACKET_TYPES","withNativeBlob","Blob","Object","prototype","toString","call","withNativeArrayBuffer","ArrayBuffer","isView","obj","buffer","encodePacket","supportsBinary","callback","type","data","encodeBlobAsBase64","fileReader","FileReader","onload","content","result","split","readAsDataURL"],"sources":["/Users/tk/workspaces/personal/repos/frontend-challenges/chat/node_modules/engine.io-parser/build/esm/encodePacket.browser.js"],"sourcesContent":["import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + content);\n    };\n    return fileReader.readAsDataURL(data);\n};\nexport default encodePacket;\n"],"mappings":"AAAA,SAASA,YAAT,QAA6B,cAA7B;AACA,MAAMC,cAAc,GAAG,OAAOC,IAAP,KAAgB,UAAhB,IAClB,OAAOA,IAAP,KAAgB,WAAhB,IACGC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BJ,IAA/B,MAAyC,0BAFjD;AAGA,MAAMK,qBAAqB,GAAG,OAAOC,WAAP,KAAuB,UAArD,C,CACA;;AACA,MAAMC,MAAM,GAAGC,GAAG,IAAI;EAClB,OAAO,OAAOF,WAAW,CAACC,MAAnB,KAA8B,UAA9B,GACDD,WAAW,CAACC,MAAZ,CAAmBC,GAAnB,CADC,GAEDA,GAAG,IAAIA,GAAG,CAACC,MAAJ,YAAsBH,WAFnC;AAGH,CAJD;;AAKA,MAAMI,YAAY,GAAG,OAAiBC,cAAjB,EAAiCC,QAAjC,KAA8C;EAAA,IAA7C;IAAEC,IAAF;IAAQC;EAAR,CAA6C;;EAC/D,IAAIf,cAAc,IAAIe,IAAI,YAAYd,IAAtC,EAA4C;IACxC,IAAIW,cAAJ,EAAoB;MAChB,OAAOC,QAAQ,CAACE,IAAD,CAAf;IACH,CAFD,MAGK;MACD,OAAOC,kBAAkB,CAACD,IAAD,EAAOF,QAAP,CAAzB;IACH;EACJ,CAPD,MAQK,IAAIP,qBAAqB,KACzBS,IAAI,YAAYR,WAAhB,IAA+BC,MAAM,CAACO,IAAD,CADZ,CAAzB,EAC8C;IAC/C,IAAIH,cAAJ,EAAoB;MAChB,OAAOC,QAAQ,CAACE,IAAD,CAAf;IACH,CAFD,MAGK;MACD,OAAOC,kBAAkB,CAAC,IAAIf,IAAJ,CAAS,CAACc,IAAD,CAAT,CAAD,EAAmBF,QAAnB,CAAzB;IACH;EACJ,CAjB8D,CAkB/D;;;EACA,OAAOA,QAAQ,CAACd,YAAY,CAACe,IAAD,CAAZ,IAAsBC,IAAI,IAAI,EAA9B,CAAD,CAAf;AACH,CApBD;;AAqBA,MAAMC,kBAAkB,GAAG,CAACD,IAAD,EAAOF,QAAP,KAAoB;EAC3C,MAAMI,UAAU,GAAG,IAAIC,UAAJ,EAAnB;;EACAD,UAAU,CAACE,MAAX,GAAoB,YAAY;IAC5B,MAAMC,OAAO,GAAGH,UAAU,CAACI,MAAX,CAAkBC,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,CAAhB;IACAT,QAAQ,CAAC,MAAMO,OAAP,CAAR;EACH,CAHD;;EAIA,OAAOH,UAAU,CAACM,aAAX,CAAyBR,IAAzB,CAAP;AACH,CAPD;;AAQA,eAAeJ,YAAf"},"metadata":{},"sourceType":"module"}